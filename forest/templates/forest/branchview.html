{% extends "base.html" %}
{% load static %}


{% block content %}
    <h2>branch view</h2>
    <h3>{{ msg }}</h3>
    <h3>{{ branch.subject }}</h3>
    <div class="bvnodelist">
        {% for node in nodes %}
            <div class="bvnode {% if node.sender.username == user.username %}sentmessage{% endif %}">
                <p class="node_sender">{{ node.sender }}</p>
                <p class="created_on">{{ node.created_on }}</p>
                <p class="node_content">{{ node.content }}</p>
                <p class="node_id">{{ node.id }}</p>
            </div>
        {% endfor %}
    </div>

    <hr>

    <h2>Reply</h2>
    <form method="POST" class="genericForm1" id="replyform">
        {% csrf_token %}
        <label for="Subject">Branch Subject</label>
        <input type="text" name="Subject" placeholder="Subject" value="{{ branch.subject }}">
        <label for="Recipient">Recipient</label>
        <input type="text" name="Recipient" placeholder="Recipient" required>
        <textarea name="Body" placeholder="">{{bodycontent}}</textarea>
        <input type="hidden" name="ParentBranch" value="{{ branch.id }}">
        <input type="hidden" name="ParentNode" id="ParentNode" value="">
        <input type="submit" value="Send">
    </form>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="{% static 'js/branchview.js' %}"></script>
{% endblock %}

